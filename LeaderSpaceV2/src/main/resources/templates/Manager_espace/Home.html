<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Manager Home</title>
    <link rel="stylesheet" type="text/css" href="/css/Home.css">
    <script th:src="@{/js/modal.js}"></script>
    <style>
        /* CSS for profile picture */
        :root {
            --circleSize: 165px;
            --radius: 50%;
            --shadow: 0 0 10px 0 rgba(255, 255, 255, .35);
            --fontColor: rgb(250, 250, 250);
        }

        .profile-pic {
            color: transparent;
            transition: all .3s ease;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .profile-pic input {
            display: none;
        }

        .profile-pic img {
            width: 165px;
            height: 165px;
            object-fit: cover;
            border-radius: 50%;
            box-shadow: 0 0 10px 0 rgba(255, 255, 255, .35);
        }


        .profile-pic .-label {
            cursor: pointer;
            height: var(--circleSize);
            width: var(--circleSize);
        }

        .profile-pic:hover .-label {
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: rgba(0, 0, 0, .8);
            z-index: 10000;
            color: var(--fontColor);
            transition: background-color .2s ease-in-out;
            border-radius: var(--radius);
            margin-bottom: 0;
        }

        .profile-pic span {
            display: inline-flex;
            padding: .2em;
            height: 2em;
        }
        a:hover {
            text-decoration: none;
        }
    </style>
</head>
<body>
<header>
    <h1>Welcome to the Manager Home Page</h1>
    <form th:action="@{/logout}" method="post">
        <button type="submit">Logout</button>
    </form>
    <form th:action="@{/reception/visit-of-team}" method="get">
        <button type="submit">team management</button>
    </form>
    <form th:action="@{/reception/visit-subscriber}" method="get">
        <button type="submit">Visit for subscriber</button>
    </form>
    <form th:action="@{/reception/visit-room}" method="get">
        <button type="submit">Visit for conference room</button>
    </form>
    <form th:action="@{/reception/visit-desk}" method="get">
        <button type="submit">Visit for Desk</button>
    </form>
    <form th:action="@{/manager/visit}" method="get">
        <button type="submit">Visit</button>
    </form>
    <form th:action="@{/manager/list-snacks}" method="get">
        <button type="submit">snacks</button>
    </form>
    <form th:action="@{/manager/list-NotSubscribers}" method="get">
        <button type="submit">NotSubscribers QR Code</button>
    </form>
    <form method="get" th:action="@{/manager/turnover}">
        <button type="submit">turnover</button>
    </form>
    <form method="get" th:action="@{/manager/list-services}">
        <button type="submit">Services</button>
    </form>
    <form method="get" th:action="@{/manager/list-subscriptions}">
        <button type="submit">Subscriptions</button>
    </form>
    <form method="get" th:action="@{/manager/list-subscribers}">
        <button type="submit">Subscribers</button>
    </form>
    <form method="get" th:action="@{/reception/Resubscribe}">
        <button type="submit">Resubscribe</button>
    </form>
    <form method="get" th:action="@{/manager/list-receptionist}">
        <button type="submit">Receptionist</button>
    </form>
    <form method="get" th:action="@{/manager/list-devis}">
        <button type="submit">devis</button>
    </form>
    <form method="get" th:action="@{/manager/list-facture}">
        <button type="submit">facture</button>
    </form>
    <form method="get" th:action="@{/manager/list-contrat}">
        <button type="submit">contrat</button>
    </form>
    <form method="get" th:action="@{/manager/caisse}">
        <button type="submit">Caisse</button>
    </form>
    <form method="get" th:action="@{/manager/bank}">
        <button type="submit">Bank</button>
    </form>
</header>

<main>
    <section>
        <h2>Profile Information</h2>

        <!-- Profile Picture Section -->
        <div class="profile-pic">
            <form th:action="@{/manager/uploadProfileImage}" method="post" enctype="multipart/form-data">
                <input type="hidden" name="userId" th:value="${profile.id}">
                <label class="-label" for="file">
                    <span class="glyphicon glyphicon-camera"></span>
                    <span>Change Image</span>
                </label>
                <input id="file" type="file" name="file" onchange="loadFile(event)" />
                <img th:src="${profile.base64Image != null ? 'data:image/png;base64,' + profile.base64Image : 'https://cdn.pixabay.com/photo/2017/08/06/21/01/louvre-2596278_960_720.jpg'}" class="profile-pic" id="profileImage" />
                <button type="submit">Save Image</button>
            </form>
        </div>



        <div>
            <label>ID: </label>
            <span th:text="${profile.id}"></span>
        </div>
        <div>
            <label>CIN: </label>
            <span th:text="${profile.CIN}"></span>
        </div>
        <div>
            <label>First Name: </label>
            <span th:text="${profile.first_name}"></span>
        </div>
        <div>
            <label>Last Name: </label>
            <span th:text="${profile.last_name}"></span>
        </div>
        <div>
            <label>Email: </label>
            <span th:text="${profile.email}"></span>
        </div>
        <div>
            <label>Phone: </label>
            <span th:text="${profile.phone}"></span>
        </div>
        <div>
            <label>CNSS Number: </label>
            <span th:text="${profile.CNSS_number}"></span>
        </div>

        <div>
            <button id="qrCodeBtn">QR code</button>
        </div>
        <form th:action="@{/reception/badge}" method="post">
            <input type="hidden" name="userId" th:value="${profile.id}">
            <input type="hidden" name="qrCodeBase64" th:value="${qrCodeBase64}">
            <button type="submit">my badge</button>
        </form>

        <!-- Modal for QR Code -->
        <div id="qrCodeModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <img id="qrCodeImg" th:src="@{'data:image/png;base64,' + ${qrCodeBase64}}" alt="QR Code"
                     th:data-filename="${profile.first_name +'_'+ profile.last_name}"/>
                <br>
                <button id="downloadBtn">Download QR code</button>
            </div>
        </div>
    </section>
    <form th:action="@{/manager/update-password}" method="get">
        <button type="submit">modifier le mote de passe</button>
    </form>
</main>

<footer>
    <p>Â© 2024 leader space. All Rights Reserved.</p>
</footer>

<script>
    var loadFile = function (event) {
        var image = document.getElementById("profileImage");
        image.src = URL.createObjectURL(event.target.files[0]);
    };

</script>
</body>
</html>
