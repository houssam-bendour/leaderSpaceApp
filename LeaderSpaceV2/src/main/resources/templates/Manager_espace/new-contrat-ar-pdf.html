<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>عقد التوطين</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-image: url('/image/ls.jpg');
            background-repeat: no-repeat;
            background-position: center center;
            background-size: cover;
            background-attachment: fixed;
            flex-direction: column;
        }

        .container {
            width: 210mm;
            padding: 20mm;
            /*border: 1px solid #ccc;*/
            background: #fff;
            margin: auto;
            /*box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);*/
        }

        h1 {
            text-align: center;
            font-size: 24px;
            margin-bottom: 20px;
        }

        h2 {
            font-size: 20px;
            margin-top: 20px;
            margin-bottom: 10px;
        }

        p, ul, ol {
            margin: 0 0 1em;
            line-height: 1.6;
        }

        ul, ol {
            padding-left: 20px;
        }

        .button-container {
            text-align: center;
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 10px;
            position: fixed;
            left: 50%;
            bottom: 10px;
            transform: translate(-50%, 0);
        }

        .button-container button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            background-color: #2a8a7c;
            color: #fff;
            border: none;
            border-radius: 5px;
            width: 150px;
        }

        .button-container button:hover {
            background-color: #09453d;
        }

        form {
            width: max-content;
        }
        .button-container button.delete:hover {
            background-color: #721c24;
        }
        .button-container button.delete {
            background-color: #880e18;
        }

    </style>

</head>
<body>

<div class="container" id="content">
    <h1><u>عقد التوطين</u></h1>
    <p><strong>بين الموقعين أسفله:</strong></p>
    <h2><u>الموطن لديه:</u></h2>
    <p>اسم الشركة الاجتماعي: شركة LEADER SPACE SARL.</p>
    <p>عنوانها: قسو مداح، عمارة بلا، رقم 4، مكتب رقم 28، تازة.</p>
    <p>رقم التعريف الموحد للشركة: 003198568000092 </p>
    <p>سجلها التجاري رقم: 6819 </p>
    <p>الضريبة المهنية رقم: 53296402 </p>
    <p>تمثلها مسيرتها السيدة هيبة السايح الحاملة لبطاقة التعريف الوطنية رقم: Z597330 </p>

    <h2><u>الموطن: </u></h2>
    <p th:if="${contrat.type_client.equals('Entreprise')}">اسم الشركة: <span th:text="${contrat.business_name}"></span>
    </p>
    <p th:if="${contrat.type_client.equals('Association')}">اسم الجمعية: <span
            th:text="${contrat.business_name}"></span></p>
    <p th:if="${contrat.type_client.equals('cooperative')}">اسم التعاونية: <span
            th:text="${contrat.business_name}"></span></p>
    <p th:if="${contrat.type_client.equals('Association')}">رقم التسجيل: <span
            th:text="${contrat.association_number}"></span></p>
    <p th:if="${contrat.type_client.equals('cooperative')}">رقم التسجيل: <span
            th:text="${contrat.association_number}"></span></p>
    <p th:if="${contrat.type_client.equals('Entreprise')}">رقم التعريف الموحد: <span
            th:text="${contrat.business_id}"></span></p>
    <p>يمثلها <span th:text="${contrat.the_person_who_represents_him}"></span> الحامل للبطاقة الوطنية رقم: <span
            th:text="${contrat.cin}"></span></p>

    <p><strong>تم االتفاق بين الطرفين على االتفاقات التالية:</strong></p>
    <h2><u>الموضوع:</u></h2>
    <p> يهدف هذا العقد إلى توطين مقر الشخص "الموطن" تطبيقا مقتضيات المادة 544 من القانون رقم 15.95 المتعلق بمدونة
        التجارة.</p>

    <h2><u>الخدمات</u></h2>
    <p>يلتزم الموطن لديه بتمكين الشخص الموطن من الاستفادة من الخدمات التالية:</p>
    <p>- استعمال عنوان الموطن لديه كعنوان للمقر الاجتماعي للشخص الموطن.</p>
    <p>- وضع رهن إشارته محلا أو محلات مجهزة بوسائل الاتصال مخصصة للمكاتب.</p>
    <p>- محلات معدة لمسك السجلات والوثائق وتمكين من حفظها والاطلاع عليها.</p>
    <p>- استلام وتخزين وإعادة إرسال البريد اليومي.</p>


    <h2><u>التزامات الطرفين:</u></h2>
    <h3><u>1 التزامات ''الموطن لديه'':</u></h3>
    <p>طوال مدة العقد، يلتزم ''الموطن لديه'' بااللتزامات التالية:</p>
    <p>- مسك ملف عن كل شخص ''موطن'' يحتوي على وثائق اإلثبات تتعلق فيما يخص األشخاص الذاتيين بعناوينهم الشخصية وأرقام
        هواتفهم وأرقام بطاقات هويتهم، وكذا عناوين بريدهم اإللكتروني، وفيما خيص األشخاص االعتباريين، وثائق تثبت عناوين
        وأرقام هواتف وبطاقات هوية مسرييها وكذا عناوين بريدهم اإللكتروني.</p>
    <br><br><br><br><br><br><br><br><br>
    <p>- التأكد من أن ''الموطن'' مسجل في السجل التجاري داخل أجل ثالثة أشهر من تاريخ إبرام عقد التوطين، عندما يكون هذا
        التسجيل إجباريا بموجب النصوص التشريعية والتنظيمية الجاري بها العمل. </p>
    <p>- موافاة المصالح المكلفة بالضرائب والخزينة العامة للمملكة، وعند االقتضاء إدارة الجمارك، بالئحة األشخاص الموطنين
        خالل السنةالمنصرمة، وذلك قبل تاريخ 31 يناير من كل سنة؛ </p>
    <p>- خبار كاتب الضبط لدى المحكمة المختصة ومصالح الضرائب والخزينة العامة للمملكة، وعند االقتضاء إدارة الجمارك،
        بانتهاء مدة عقد التوطين أو الفسخ المبكر له، وذلك داخل أجل شهر من تاريخ توقف العقد؛ </p>
    <p>- تمكين المفوضين القضائيين ومصالح تحصيل الديون العمومية، الحاملين لسند تنفيذي، من المعلومات الكفيلة بتمكينهم من
        االتصال بالشخص ''الموطن''؛</p>
    <p>- السهر على احترام سرية المعلومات والبيانات المتعلقة ''بالموطن''؛</p>
    <p>- إشعار مصالح الضرائب والخزينة العامة للمملكة، وعند االقتداء إدارة الجمارك، داخل أجل ال يتعدى خمسة عشر يوما من
        تاريخ توصله بالرسائل المضمونة المرسلة من قبل المصالح الجبائية إلى األشخاص الموطنين، بتعذر تسليمها إليهم؛ </p>
    <h3><u>2 التزامات ''الموطن":</u></h3>
    <P>يجب على الشخص ''الموطن''، طيلة مدة العقد، التقيد بااللتزامات التالية:</P>
    <p>- االستعمال الفعلي والحصري للمحالت كمقر للمقاولة أو للشركة أو إذا كان المقر بالخارج كوكالة أو فرع أو تمثيلية أو
        أي مؤسسة تابعة لها كيفما كانت طبيعتها؛ </p>
    <p>- التصريح لدى ''الموطن لديه''، إذا تعلق األمر بشخص ذاتي، بكل تغيير في عنوانه الشخصي ونشاطه، وإذا تعلق الأمر بشخص
        اعتباري، التصريح بكل تغيير في شكله القانوني، وتسميته وغرضه، وكذا أسماء وعناوين المسريين واألشخاص الذين يتوفرون
        على تفويض من'' الموطن'' للتعاقد باسمه مع'' الموطن لديه''، وتسليمه الوثائق المتعلقة بذلك؛ </p>
    <p>- إخبار كاتب الضبط لدى المحكمة المختصة ومصالح الضرائب والخزينة العامة للمملكة، وعند االقتضاء إدارة الجمارك، بتوقف
        التوطين، وذلك داخل أجل شهر من تاريخ انتهاء مدة العقد أو فسخه المبكر؛</p>
    <p>- االشارة الى صفته كموطن لدى'' الموطن'' لديه في جميع فواتيره ومراسالته وسندات الطلب والتعريفات والمنشورات وسائر
        الوثائق التجارية المعدة لألغيار؛ </p>
    <p>- منح وكالة يقبلها ''الموطن لديه''، استالم كل التبليغات باسمه؛ </p>
    <p>- تسليم ''الموطن لديه'' كل السجاالت والوثائق المنصوص عليها في النصوص التشريعية والتنظيمية الجاري بها العمل
        والالزمة لتنفيذ التزاماته؛ </p>
    <p>- إخبار ''الموطن لديه''، داخل أجل عشرة يوم، من تاريخ التغيير بكل تغيير في مكان أو أماكن تخزين السلع المستوردة أو
        الموجهة للتصدير؛ </p>
    <p>- إخبار الموطن لديه بأي نزاع محتمل أو قضية تكون المقاولة الموطنة طرفا فيها بشأن نشاطها التجاري.</p>
    <h2><u>ملف التوطين:</u></h2>
    <p>يودع الشخص الموطن لدى الموطن لديه ملف التوطين، والذي يتكون من الوثائق التالية</p>
    <p>- نسخة من وثيقة هوية الممثل القانوني للمقاولة الموطنة؛</p>
    <p>- نسخة من وثيقة تثبت موطن الممثل القانوني للمقاولة الموطنة؛</p>
    <p>- كشف الحساب البنكي؛ </p>
    <p>- رقم هاتف الممثل القانوني للمقاولة الموطنة؛ </p>
    <p>- عنوان إعادة إرسال البريد؛ </p>
    <p>- نسخة من النظام األساسي </p>
    <br><br><br><br><br><br>
    <h2><u>مدة العقد:</u></h2>
    <p>يبرم عقد التوطين لمدة <span th:text="${contrat.duree}"></span> قابلة للتجديد تحتسب من تاريخ تحديد تاريخ بدء العقد
        الى تحديد تاريخ انتهاء العقد. </p>
    <p>عند انتهاء مدة عقد التوطين أو فسخه المبكر، يلتزم ''الموطن لديه'' والموطن''، بإخبار كاتب ضبط المحكمة المختصة
        ومصالح الضرائب والخزينة العامة للمملكة، وعند االقتضاء إدارة الجمارك، بتوقف التوطين داخل أجل شهر من توقف
        العقد. </p>
    <h2><u>اإليجار:</u></h2>
    <p>يبرم عقد التوطين مقابل إيجار شهري قدره <b><span th:text="${contrat.montant_de_location}"></span> درهم</b>، يشمل
        الخدمات المشار إليها أعاله.</p>

    <h2><u>أفض النزاعات:</u></h2>
    <p>يعرض كل نزاع قد ينشأ بني الطرفين أثناء تنفيذ العقد على المحكمة المختصة لمقر ''الموطن لديه'</p>

    <h2><u>اختيار الموطن:</u></h2>
    <p>يحدد األطراف عناوين مقراتهم كما هي مشار إليها في بداية العقد.</p>
    <br>
    <hr>
    <br><br>
    <div style="text-align: center;">
        <p>حرر هذا العقد بمدينة تازة </p>
        <p>بتاريخ : <span th:text="${contrat.date}"></span></p>
        <p>في أربع (4) نسخ </p>
    </div>
    <span style="margin-left: 10cm;"> توقيع الموطن </span><span>توقيع الموطن لديه </span>
</div>

<div class="button-container">
    <button onclick="downloadPDF()">تحميل بصيغة PDF</button>
    <form th:action="@{/manager/confirm-domiciliation-facture(factureId=${contrat.domiciliationFacture.id})}"
          method="post">
        <button type="submit">الفاتوره</button>
    </form>

    <form th:action="@{/}"
          method="get">
        <button type="submit">إنهاء</button>
    </form>
    <form th:action="@{/manager/annulation-du-contrat(contratId=${contrat.id})}" method="post">
        <button class="delete" type="submit">حذف</button>
    </form>

</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
<script>
    function downloadPDF() {
        const {jsPDF} = window.jspdf;
        const container = document.getElementById('content');

        html2canvas(container).then(canvas => {
            const imgData = canvas.toDataURL('image/png');
            const pdf = new jsPDF('p', 'pt', 'a4');
            const pdfWidth = pdf.internal.pageSize.getWidth();
            const pdfHeight = pdf.internal.pageSize.getHeight();
            const imgProps = pdf.getImageProperties(imgData);
            const imgHeight = imgProps.height * pdfWidth / imgProps.width;
            let heightLeft = imgHeight;
            let position = 0;

            pdf.addImage(imgData, 'PNG', 0, position, pdfWidth, imgHeight);
            heightLeft -= pdfHeight;

            while (heightLeft >= 0) {
                position = heightLeft - imgHeight;
                pdf.addPage();
                pdf.addImage(imgData, 'PNG', 0, position, pdfWidth, imgHeight);
                heightLeft -= pdfHeight;
            }

            pdf.save('contrat_de_domiciliation.pdf');
        });
    }
</script>

</body>
</html>
